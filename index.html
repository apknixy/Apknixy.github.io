<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>AddMint</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app">
        <div id="load-status">
            <div class="loader"></div>
            <p>Initializing AddMint...</p>
        </div>

        <div id="auth-screen">
            <div class="auth-container">
                <div id="login-form" class="active">
                    <h2>Login to AddMint</h2>
                    <div class="input-group"><input type="email" id="login-email" placeholder="Email"></div>
                    <div class="input-group"><input type="password" id="login-password" placeholder="Password"></div>
                    <button class="auth-button" id="login-btn">Log In</button>
                    <p class="auth-toggle" onclick="toggleAuthForm('signup')">Don't have an account? Sign Up</p>
                </div>
                <div id="signup-form">
                    <h2>Sign Up for AddMint</h2>
                    <div class="input-group"><input type="email" id="signup-email" placeholder="Email"></div>
                    <div class="input-group"><input type="password" id="signup-password" placeholder="Password (min 6 characters)"></div>
                    <div class="input-group"><input type="password" id="signup-confirm-password" placeholder="Confirm Password"></div>
                    <button class="auth-button" id="signup-btn">Sign Up</button>
                    <p class="auth-toggle" onclick="toggleAuthForm('login')">Already have an account? Log In</p>
                </div>
            </div>
        </div>

        <div id="main-app" style="display: none;">
            <header id="header">
                <div class="logo">AddMint</div>
                <div style="display: flex; align-items: center;">
                    <div class="header-icon" id="notifications-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                    </div>
                    <div class="header-icon" id="menu-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    </div>
                </div>
            </header>

            <div id="home-screen" class="screen active">
                <div class="post-feed" id="home-feed-container"></div>
                <div class="loader-container" style="text-align: center; padding: 20px;">
                    <div class="loader" id="home-feed-loader"></div>
                </div>
            </div>

            <div id="search-screen" class="screen">
                <h2>Search</h2>
                <input type="text" id="search-input" placeholder="Search users...">
                <div id="search-results-container"></div>
            </div>

            <div id="feed-screen" class="screen">
                <h2>Feed</h2>
                <div id="feed-container"></div>
            </div>

            <div id="upload-screen" class="screen">
                <h2>Create Post</h2>
                <textarea id="post-content-textarea" placeholder="What's on your mind?"></textarea>
                <div class="controls">
                    <button id="bold-btn">B</button>
                    <button id="italic-btn">I</button>
                    <button id="url-btn">Link</button>
                    <button id="image-btn">Image</button>
                    <button id="youtube-btn">YouTube</button>
                </div>
                <div class="monetize-toggle">
                    <span>Monetize Post</span>
                    <div class="menu-item-toggle" id="monetize-toggle-btn"></div>
                </div>
                <button class="auth-button" id="publish-btn">Publish</button>
            </div>

            <div id="profile-screen" class="screen">
                <div id="profile-header">
                    <div id="profile-details">
                        <img id="profile-avatar" class="post-avatar" alt="Profile Picture">
                        <div>
                            <h3 id="profile-display-name"></h3>
                            <p id="profile-username"></p>
                        </div>
                    </div>
                    <button id="profile-action-btn" class="auth-button">Edit Profile</button>
                </div>
                <div id="profile-stats">
                    <div><span id="post-count">0</span> Posts</div>
                    <div id="followers-count-btn"><span id="followers-count">0</span> Followers</div>
                    <div id="following-count-btn"><span id="following-count">0</span> Following</div>
                </div>
                <p id="profile-bio"></p>
                <div id="profile-tabs">
                    <button id="my-posts-tab" class="active">Posts</button>
                    <button id="reposts-tab">Reposts</button>
                </div>
                <div id="profile-post-feed"></div>
            </div>

            <div id="monetization-screen" class="screen">
                <h2>Monetization & Earnings</h2>
                <p>Total Monetized Views: <span id="total-monetized-views">0</span></p>
                <p>You need 100,000 views to withdraw.</p>
                <button class="auth-button" id="withdraw-btn" disabled>Withdraw Earnings</button>
            </div>

            <footer id="footer">
                <div class="nav-item active" id="home-nav-btn" data-target="home-screen">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    <span>Home</span>
                </div>
                <div class="nav-item" id="search-nav-btn" data-target="search-screen">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    <span>Search</span>
                </div>
                <div class="nav-item" id="feed-nav-btn" data-target="feed-screen">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play-circle"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg>
                    <span>Feed</span>
                </div>
                <div class="nav-item" id="upload-nav-btn" data-target="upload-screen">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                    <span>Upload</span>
                </div>
                <div class="nav-item" id="profile-nav-btn" data-target="profile-screen">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    <span>Profile</span>
                </div>
            </footer>

            <div id="main-menu">
                <div class="menu-item" id="dark-mode-toggle">
                    <span class="menu-item-title">Dark Mode</span>
                    <div class="menu-item-toggle" id="dark-mode-toggle-btn"></div>
                </div>
                <div class="menu-item" id="data-saver-toggle">
                    <span class="menu-item-title">Data Saver</span>
                    <div class="menu-item-toggle" id="data-saver-toggle-btn"></div>
                </div>
                <div class="menu-item" onclick="window.open('https://www.youtube.com/@add_mint', '_blank')">
                    <span class="menu-item-title">AddMint YouTube</span>
                </div>
                <div class="menu-item" onclick="window.open('https://www.instagram.com/addmint__', '_blank')">
                    <span class="menu-item-title">AddMint Instagram</span>
                </div>
                <div class="menu-item" id="monetize-menu-btn" onclick="showScreen('monetization-screen')">
                    <span class="menu-item-title">Monetization</span>
                </div>
                <div class="menu-item" id="logout-btn">
                    <span class="menu-item-title">Logout</span>
                </div>
            </div>

            <div id="edit-profile-modal" class="modal-overlay">
                <div class="modal-content">
                    <h2>Edit Profile</h2>
                    <div class="input-group">
                        <label>Username</label>
                        <input type="text" id="edit-username" placeholder="@username">
                        <span id="username-validation-icon" class="validation-icon"></span>
                    </div>
                    <div class="input-group">
                        <label>Display Name</label>
                        <input type="text" id="edit-name" placeholder="Display Name">
                    </div>
                    <div class="input-group">
                        <label>Bio (max 500 chars)</label>
                        <textarea id="edit-bio" maxlength="500" placeholder="A little about yourself..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Profile Picture URL</label>
                        <input type="url" id="edit-profile-pic-url" placeholder="https://i.postimg.cc/image.jpg">
                    </div>
                    <button class="auth-button" id="save-profile-btn">Save</button>
                    <button class="auth-button" id="cancel-edit-btn" style="background: var(--bg-color-darker); color: var(--text-color-main); margin-top: 10px;">Cancel</button>
                </div>
            </div>

            <div id="withdraw-modal" class="modal-overlay">
                <div class="modal-content">
                    <h2>Withdraw Earnings</h2>
                    <p>Total Monetized Views: <span id="withdraw-views-display">0</span></p>
                    <div class="input-group">
                        <label>PayPal Email or UPI ID</label>
                        <input type="text" id="withdrawal-payment-id" placeholder="your_paypal@example.com or your_upi_id@bank">
                    </div>
                    <button class="auth-button" id="submit-withdrawal-btn">Submit Request</button>
                    <button class="auth-button" id="cancel-withdrawal-btn" style="background: var(--bg-color-darker); color: var(--text-color-main); margin-top: 10px;">Cancel</button>
                </div>
            </div>

            <div id="comment-modal" class="modal-overlay">
                <div class="modal-content" style="max-width: 95%; height: 80%; padding: 0;">
                    <div style="padding: 15px; border-bottom: 1px solid var(--border-color-main); text-align: center;">
                        <h3 style="display: inline;">Comments</h3>
                        <button class="modal-close-button" onclick="hideModal('comment-modal')">&times;</button>
                    </div>
                    <div id="comment-list" style="overflow-y: auto; padding: 15px; height: calc(100% - 100px);"></div>
                    <div style="padding: 15px; border-top: 1px solid var(--border-color-main); display: flex;">
                        <textarea id="new-comment-input" maxlength="100" placeholder="Add a comment..." style="flex-grow: 1; margin-right: 10px;"></textarea>
                        <button class="auth-button" id="post-comment-btn" style="width: 80px;">Post</button>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-functions.js"></script>
    <script src="script.js"></script>
</body>
</html>
